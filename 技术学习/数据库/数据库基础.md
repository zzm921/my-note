### 什么是数据库，数据库管理系统，数据库系统，数据库管理员？
- 数据库：数据库就是信息的集合或者说数据库是由数据库管理系统管理的数据的集合
- 数据库管理系统：数据库管理系统是一种操纵和管理数据库的大型软件，通常用于建立、使用和维护数据数据库
- 数据库系统：数据库系统通常由软件、数据库和数据库管理员组成
- 数据库管理员：数据库管理员负责全面管理和控制数据库系统
### 什么是元组，码，候选码，主码，外码，主属性，非主属性
- 元组：元组（tuple）是关系数据库中的基本概念，关系是一张表，表中的每一行就是一个原则，每一列就是一个属性。在二维表里面，元组也成为行。
- 码：码就是能唯一标识实体的属性，对应表中的列。
- 候选码：若关系中的某一个属性或属性组的值能唯一的标识一个原则，而其任何子集都不能再标识，则称该属性组为候选码。如：在学生实体中，学号是能唯一的区分学生实体的，同时又假设 姓名 和 扳机的属性组合足以区分学生实体，那么 学号 和姓名、班级都是候选码
- 主码：主码也叫主键。主码是从候选码中选出来的，一个实体集中只能有一个主码，但可以有多个候选码。
- 外码：外码也叫外键。如果一个关系中的一个属性是另外一个关系中的主码，则这个属性为外码。
- 主属性：候选码中出现过的属性为主属性。
- 非主属性：不包含在候选码中的属性为非主属性。
### 什么是ER图
ER图全称是 entity Relationship Diagram（实体联系图），提供了表示实体类型、属性和联系的方法。

ER图由三个要素组成：
- 实体：通常是现实世界的业务对象，当然使用一些逻辑对象也是可以的。
- 属性：某个实体拥有的属性，属性是用来描述组成实体的要素，对于产品设计来说可以理解为字段
- 联系：实体与实体之间的关系。在ER图中用菱形表示，这个关系不仅有业务关联关系，还能通过数字表示实体之间的数量对照关系。

下图是一个学生选课的 ER 图，每个学生可以选若干门课程，同一门课程也可以被若干人选择，所以它们之间的关系是多对多（M: N）。另外，还有其他两种实体之间的关系是：1 对 1（1:1）、1 对多（1: N）。
![[Pasted image 20231009150431.png]]

### 数据库范式
- 第一范式：**确保每列保持原子性)** 要求属性具有原子性，数据库表中的所有字段值都是不可分解的原子值。
- 第二范式：**确保表中的每列都和主键相关**  在第一范式的基础上，第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的部分相关。也就是说在一个数据库表中，一个表只能保存一种数据，不可以吧多种数据保存在同一张数据表中。
- 第三范式：**确保每列都和主键列直接相关,而不是间接相关**  
#### 第一范式
属性（对应于表中的字段）不能再被分割，也就是这个字段只能是一个值，不能再分为多个其他的字段了。**1NF 是所有关系型数据库的最基本要求** ，也就是说关系型数据库中创建的表一定满足第一范式。
#### 第二范式
2NF 在 1NF 的基础之上，消除了非主属性对于码的部分函数依赖。如下图所示，展示了第一范式到第二范式的过渡。第二范式在第一范式的基础上增加了一个列，这个列称为主键，非主属性都依赖于主键。
![[Pasted image 20231009151617.png]]
一些重要的概念：
- **函数依赖**：若在一张表中，在属性（属性组）x的值确定的情况下，必定能确定属性y的值，那么就可以说y函数依赖于x，写作x->y
- **部分函数依赖**：如果x->y,并存在x的一个真子集x0，是的x0->y,则称y对x部分函数依赖。比如学生基本信息表 R 中（学号，身份证号，姓名）当然学号属性取值是唯一的，在 R 关系中，（学号，身份证号）->（姓名），（学号）->（姓名），（身份证号）->（姓名）；所以姓名部分函数依赖于（学号，身份证号）；
- **完全函数依赖**：在一个关系中，若某个非主属性数据项依赖于全部关键字称之为完全函数依赖。比如学生基本信息表 R（学号，班级，姓名）假设不同的班级学号有相同的，班级内学号不能相同，在 R 关系中，（学号，班级）->（姓名），但是（学号）->(姓名)不成立，（班级）->(姓名)不成立，所以姓名完全函数依赖与（学号，班级）
- **传递函数依赖**：在关系模式 R(U)中，设 X，Y，Z 是 U 的不同的属性子集，如果 X 确定 Y、Y 确定 Z，且有 X 不包含 Y，Y 不确定 X，（X∪Y）∩Z=空集合，则称 Z 传递函数依赖(transitive functional dependency) 于 X。传递函数依赖会导致数据冗余和异常。传递函数依赖的 Y 和 Z 子集往往同属于某一个事物，因此可将其合并放到一个表中。比如在关系 R(学号 , 姓名, 系名，系主任)中，学号 → 系名，系名 → 系主任，所以存在非主属性系主任对于学号的传递函数依赖。。
#### 第三范式
3NF 在 2NF 的基础之上，消除了非主属性对于码的传递函数依赖 。符合 3NF 要求的数据库设计，**基本**上解决了数据冗余过大，插入异常，修改异常，删除异常的问题。比如在关系 R(学号 , 姓名, 系名，系主任)中，学号 → 系名，系名 → 系主任，所以存在非主属性系主任对于学号的传递函数依赖，所以该表的设计，不符合 3NF 的要求。
### 主键和外键有什么区别
- 主键：主键用于唯一标识一个元组，不能有重复，不允许为空，一个表只能有一个主键
- 外键：外键用来和其他表建立联系用，外键是另一个表的主键，外键可以有重复的，也可以为空，一个表可以有多个外键。
### 什么是存储过程
我们可以吧存储过程看成是一些sql语句的集合，中间加了点逻辑控制语句。存储过程在业务比较复杂的时候非常实用，比如很多时候我们完成一个操作可能需要写一大串sql语句，这个时候我们就可以写一个存储过程，这样比较方便我们下次调用。存储过程一旦调用完成通过后就能稳定雨欣，另外，使用存储过程比单纯的sql语句执行要快，因为存储过程是预编译过的。
存储过程在互联网公司应用不多，因为存储过程难以调试和扩展，而且没有移植性，还会消耗数据库资源。
### drop、delete 与 truncate区别
- drop（丢弃数据）: drop table 表名，直接将表都删除掉，在删除表的时候使用。
- truncate （清空数据）：`truncate table 表名` ，只删除表中的数据，再插入数据的时候自增长 id 又从 1 开始，在清空表中数据的时候使用。
- `delete`（删除数据） : `delete from 表名 where 列名=值`，删除某一行的数据，如果不加 `where` 子句和`truncate table 表名`作用类似。

`truncate` 和 `drop` 属于 DDL(数据定义语言)语句，操作立即生效，原数据不放到 rollback segment 中，不能回滚，操作不触发 trigger。而 `delete` 语句是 DML (数据库操作语言)语句，这个操作会放到 rollback segment 中，事务提交之后才生效。

**DML 语句和 DDL 语句区别：**

- DML 是数据库操作语言（Data Manipulation Language）的缩写，是指对数据库中表记录的操作，主要包括表记录的插入、更新、删除和查询，是开发人员日常使用最频繁的操作。
- DDL （Data Definition Language）是数据定义语言的缩写，简单来说，就是对数据库内部的对象进行创建、删除、修改的操作语言。它和 DML 语言的最大区别是 DML 只是对表内部数据的操作，而不涉及到表的定义、结构的修改，更不会涉及到其他对象。DDL 语句更多的被数据库管理员（DBA）所使用，一般的开发人员很少使用。

另外，由于`select`不会对表进行破坏，所以有的地方也会把`select`单独区分开叫做数据库查询语言 DQL（Data Query Language）。

### 数据库设计通常分为哪几步
1. 需求分析
2. 概念结构设计
3. 逻辑结构设计
4. 物理结构设计
5. 数据库实施
6. 数据库的运行和维护